apiVersion: v1
kind: ConfigMap
metadata:
  name: claim-controller-template
  namespace: default
data:
  resources.yaml: |
    apiVersion: v1
    kind: Pod
    metadata:
      labels:
        app.kubernetes.io/name: {{ .Values.workload.name | default "claim-workload" }}
    spec:
      restartPolicy: Never
      containers:
        - name: {{ .Values.workload.containerName | default "app" }}
          image: {{ .Values.workload.image | default "nginx:stable" }}
          imagePullPolicy: {{ .Values.workload.imagePullPolicy | default "IfNotPresent" }}
          ports:
            - containerPort: {{ .Values.workload.containerPort | default 80 }}
    ---
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/name: {{ .Values.service.name | default "claim-service" }}
    spec:
      ports:
        - name: {{ .Values.service.portName | default "http" }}
          port: {{ .Values.service.port | default 80 }}
          targetPort: {{ .Values.service.targetPort | default 80 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: claim-controller-template-values
  namespace: default
data:
  values.yaml: |
    workload:
      name: claim-workload
      containerName: app
      image: nginx:stable
      imagePullPolicy: IfNotPresent
      containerPort: 80
    service:
      name: claim-service
      portName: http
      port: 80
      targetPort: 80