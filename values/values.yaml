# This file is only for a demo purpose, it is not used by the controller.
# Please refer to charts/claim-controller/values.yaml for the actual values used by the controller.
workload:
  name: claim-workload
  containerName: app
  image: mcr.microsoft.com/playwright/mcp:v0.0.68
  imagePullPolicy: IfNotPresent
  containerPort: 8932
  readinessProbe:
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 1
    failureThreshold: 3
  livenessProbe:
    initialDelaySeconds: 15
    periodSeconds: 20
    timeoutSeconds: 1
    failureThreshold: 3

service:
  portName: http
  port: 80
  targetPort: 8932

resources: |
  apiVersion: v1
  kind: Pod
  metadata:
    name: {{ .Release.Name }}
    labels:
      app.kubernetes.io/name: {{ .Values.workload.name }}
  spec:
    restartPolicy: Never
    containers:
      - name: {{ .Values.workload.containerName }}
        image: {{ .Values.workload.image }}
        imagePullPolicy: {{ .Values.workload.imagePullPolicy }}
        ports:
          - containerPort: {{ .Values.workload.containerPort }}
        readinessProbe:
          tcpSocket:
            port: {{ .Values.workload.containerPort }}
          initialDelaySeconds: {{ .Values.workload.readinessProbe.initialDelaySeconds }}
          periodSeconds: {{ .Values.workload.readinessProbe.periodSeconds }}
          timeoutSeconds: {{ .Values.workload.readinessProbe.timeoutSeconds }}
          failureThreshold: {{ .Values.workload.readinessProbe.failureThreshold }}
        livenessProbe:
          tcpSocket:
            port: {{ .Values.workload.containerPort }}
          initialDelaySeconds: {{ .Values.workload.livenessProbe.initialDelaySeconds }}
          periodSeconds: {{ .Values.workload.livenessProbe.periodSeconds }}
          timeoutSeconds: {{ .Values.workload.livenessProbe.timeoutSeconds }}
          failureThreshold: {{ .Values.workload.livenessProbe.failureThreshold }}
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 500m
            memory: 512Mi
  ---
  apiVersion: v1
  kind: Service
  metadata:
    name: {{ .Release.Name }}
    labels:
      app.kubernetes.io/name: {{ .Release.Name }}
    annotations:
      claim.controller/return: "fqdn={{ .Release.Name }}.{{ .Release.Namespace }}.svc.cluster.local"
  spec:
    ports:
      - name: {{ .Values.service.portName | default "http" }}
        port: {{ .Values.service.port }}
        targetPort: {{ .Values.service.targetPort }}
